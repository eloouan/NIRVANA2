(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8654)}])},8654:function(n,e,s){"use strict";s.r(e),s.d(e,{default:function(){return k}});var t=s(5893),o=s(7054),i=s(797),a=s(7294),c=s(7422),r=s(9655),l=s(7568),d=s(7582),p=s(2185),u=s(5336);s(720);function h(n){var e=n.setOffice,s=n.createMarker,o=(0,p.ZP)(),i=o.ready,c=o.value,r=o.setValue,h=o.suggestions,f=h.status,m=h.data,g=o.clearSuggestions,x=(0,a.useState)("default"),j=(x[0],x[1]),v=(0,a.useState)(!1),b=v[0],y=v[1],k=(0,a.useState)(!1),N=(k[0],k[1]),C=(0,a.useState)("default"),w=C[0],S=C[1],_=function(){var n=(0,l.Z)((function(n){var s,t,o,i;return(0,d.__generator)(this,(function(a){switch(a.label){case 0:return r(n,!1),g(),[4,(0,p.LM)({address:n})];case 1:return s=a.sent(),[4,(0,p.WV)(s[0])];case 2:return t=a.sent(),o=t.lat,i=t.lng,e(n,n,w,{lat:o,lng:i}),N(!0),[2]}}))}));return function(e){return n.apply(this,arguments)}}();return(0,t.jsxs)("div",{children:[(0,t.jsxs)(u.hQ,{onSelect:function(n){j(n),S(n),s(n),y(!0)},children:[(0,t.jsx)(u.gA,{value:w,onChange:function(n){S(n.target.value),y(!1),N(!1)},disabled:!i,className:"combobox-input input-field",placeholder:"What type of place is this?"}),(0,t.jsx)(u.SF,{children:(0,t.jsxs)(u.Gk,{children:[(0,t.jsx)(u.O2,{value:"restaurant"}),(0,t.jsx)(u.O2,{value:"shopping"}),(0,t.jsx)(u.O2,{value:"entertainment"}),(0,t.jsx)(u.O2,{value:"school"}),(0,t.jsx)(u.O2,{value:"park"}),(0,t.jsx)(u.O2,{value:"gym"}),(0,t.jsx)(u.O2,{value:"transport"})]})})]}),b&&(0,t.jsxs)(u.hQ,{onSelect:_,children:[(0,t.jsx)(u.gA,{value:c,onChange:function(n){r(n.target.value),N(!1)},disabled:!i,className:"combobox-input input-field",placeholder:"What's the place's address?"}),(0,t.jsx)(u.SF,{children:(0,t.jsx)(u.Gk,{children:"OK"===f&&m.map((function(n){var e=n.place_id,s=n.description;return(0,t.jsx)(u.O2,{value:s},e)}))})})]})]})}var f=function(){return(0,t.jsxs)("div",{className:"snowfall","aria-hidden":"true",children:[(0,t.jsx)("div",{className:"snowflake",children:"\u2745"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2745"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,t.jsx)("div",{className:"snowflake",children:"\u2746"})]})},m=function(n){var e=n.markerTypes,s=n.displayTypes,o=n.onClick,i=(0,a.useState)(null),c=i[0],r=i[1];return(0,t.jsx)("div",{className:"filter-menu",children:s.map((function(n,s){return(0,t.jsx)("div",{className:"filter-item",children:(0,t.jsxs)("label",{className:"filter-label",title:e[s],children:[(0,t.jsx)("input",{type:"checkbox",checked:c===n,onChange:function(){return function(n){r(c===n?null:n),o(n)}(e[s])}}),n]})},s)}))})},g=function(n){var e=n.marker,s=n.onCloseClick,i=n.onDescriptionChange,c=n.disableDescription,r=void 0!==c&&c,l=(0,a.useState)(e.description),d=l[0],p=l[1];return(0,t.jsx)(o.nx,{position:e.position,onCloseClick:s,children:(0,t.jsxs)("div",{className:"info-window-form",children:[(0,t.jsx)("h2",{children:e.address}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{style:{fontFamily:"Arial",color:"grey"},children:"Type of place:"})," ",(0,t.jsx)("strong",{style:{color:"grey"},children:(0,t.jsx)("i",{children:e.type})})]}),(0,t.jsxs)("form",{onSubmit:function(n){n.preventDefault(),i(d),s()},children:[(0,t.jsxs)("label",{children:[(0,t.jsxs)("strong",{style:{fontFamily:"Arial",fontSize:18},children:[" ","\u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \u200e \ud83d\udcdd\u270d\ud83c\udffb"]}),(0,t.jsx)("textarea",{className:"custom-textarea",value:d,onChange:function(n){return!r&&p(n.target.value)},readOnly:r})]}),(0,t.jsx)("div",{className:"save-button-container",children:!r&&(0,t.jsx)("button",{className:"save-button",type:"submit",children:"Save"})})]})]})})},x=s(5121);x.Z.get("https://l1.dptinfo-usmb.fr/~grp11/Tests/get_default_points.php").then((function(n){n.data.forEach((function(n){var e={address:"",description:"",type:"",position:{lat:45.57124197967436,lng:5.919697965999837}};e.address=n.address,e.description=n.description,e.type=n.type,e.position.lat=parseFloat(n.coordX),e.position.lng=parseFloat(n.coordY),j=(0,i.Z)(j).concat([e])}))}));var j=[{address:"32 Pl. Monge, 73000 Chamb\xe9ry",description:"Restaurant Carr\xe9 des Sens - fine dining",type:"restaurant",position:{lat:45.56324311633563,lng:5.921157303181863}},{address:"1097 Av. des Landiers, 73000 Chamb\xe9ry",description:"Shopping mall Chamnord",type:"shopping",position:{lat:45.59258489131312,lng:5.899454352402417}},{address:"Rue du Lac Majeur, 73370 Le Bourget-du-Lac",description:"Universite Bourget du Lac",type:"school",position:{lat:45.641565952237485,lng:5.87271983174593}},{address:"8 Rue Bonivard, 73000 Chamb\xe9ry",description:"KeepCool gym",type:"gym",position:{lat:45.566886527715134,lng:5.918076037055356}},{address:"Pl. de la Gare, 73010 Chamb\xe9ry",description:"Train Station Chambery, Challes-les-eaux",type:"transport",position:{lat:45.57124197967436,lng:5.919697965999837}}],v=[],b=function(){var n=(0,c.useAuth)(),e=n.isLogged,s=n.isAdmin,l=n.userId,d=(n.setisLogged,n.setuserId,n.setisAdmin,(0,a.useState)()),p=d[0],u=d[1],b=(0,a.useState)(),y=b[0],k=b[1],N=(0,a.useState)(!0),C=N[0],w=N[1],S=(0,a.useRef)(),_=(0,a.useState)(),L=_[0],O=_[1],D=(0,a.useState)(),F=D[0],I=D[1],M=(0,a.useRef)();console.log("Logged"+e),console.log("Admin"+s),console.log(l);var T=(0,a.useMemo)((function(){return{lat:45.566580681555415,lng:5.920610881510474}}),[]);e&&x.Z.get("https://l1.dptinfo-usmb.fr/~grp11/Tests/get_private_points.php?user_id="+l).then((function(n){n.data.forEach((function(n){var e={address:"",description:"",type:"",position:{lat:45.57124197967436,lng:5.919697965999837}};e.address=n.address,e.description=n.description,e.type=n.type,e.position.lat=parseFloat(n.coordX),e.position.lng=parseFloat(n.coordY),v=(0,i.Z)(v).concat([e])}))}));var A=(0,a.useCallback)((function(n){return S.current=n}),[]),Z=(0,a.useCallback)((function(n){return M.current=n}),[]),R=function(n){p&&(new google.maps.DirectionsService).route({origin:n,destination:p,travelMode:google.maps.TravelMode.DRIVING},(function(n,e){"OK"===e&&n&&k(n)}))},E=(0,a.useState)([]),B=E[0],P=E[1],z=(0,a.useState)([]),J=(z[0],z[1]),U=(0,a.useState)(!1),X=(U[0],U[1]);(0,a.useEffect)((function(){X(!0)}),[]);var G,K=(0,a.useState)(null),W=K[0],V=K[1],Q=(0,a.useState)(null),Y=Q[0],H=Q[1],q={restaurant:"https://cdn-icons-png.flaticon.com/32/3280/3280300.png",shopping:"https://cdn2.iconfinder.com/data/icons/christmas-filled-outline-1/512/christmas_holiday_merry_xmas_tree_5-32.png",cinema:"https://cdn-icons-png.flaticon.com/32/2503/2503508.png",school:"https://cdn-icons-png.flaticon.com/32/2767/2767828.png",park:"https://cdn-icons-png.flaticon.com/32/489/489969.png",gym:"https://cdn-icons-png.flaticon.com/32/5764/5764179.png",transport:"https://cdn3.iconfinder.com/data/icons/christmas-filled-7/128/christmas_48-32.png",bar:"https://cdn-icons-png.flaticon.com/32/8310/8310600.png",theater:"https://cdn-icons-png.flaticon.com/32/2830/2830259.png","swimming pool":"https://cdn-icons-png.flaticon.com/32/495/495711.png","ice cream shop":"https://cdn-icons-png.flaticon.com/32/938/938063.png",church:"https://cdn-icons-png.flaticon.com/32/619/619191.png","clothing store":"https://cdn-icons-png.flaticon.com/32/1415/1415746.png",bakery:"https://cdn-icons-png.flaticon.com/32/992/992710.png",hotel:"https://cdn-icons-png.flaticon.com/32/831/831477.png",museum:"https://cdn-icons-png.flaticon.com/32/5190/5190904.png","night club":"https://cdn-icons-png.flaticon.com/32/4973/4973066.png","tourist attraction":"https://cdn-icons-png.flaticon.com/32/4781/4781412.png"};return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("div",{className:"controls",children:(0,t.jsx)(h,{setOffice:function(n,e,s,t){var o,a;C?u(t):O(t),C?null===(o=S.current)||void 0===o||o.panTo(t):null===(a=M.current)||void 0===a||a.panTo(t),function(n,e,s,t){P((function(o){return(0,i.Z)(o).concat([{address:n,description:e,type:s,position:t}])}))}(n,e,s,t)},createMarker:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(B.length>0){var e=B.map((function(e,s){return{position:e.position,title:e.address,description:e.description,type:n,key:"office-".concat(s)}}));J((function(n){return(0,i.Z)(n).concat((0,i.Z)(e))}))}}})}),(0,t.jsxs)("div",{className:"map",children:[C?(0,t.jsxs)(o.b6,{zoom:13,center:T,mapContainerClassName:"map-container",options:(G={north:45.7204559777248,south:45.46085230095994,west:5.741038693653954,east:6.073561468829906},{mapId:"dee71aef6bd0faf4",disableDefaultUI:!0,clickableIcons:!1,restriction:{latLngBounds:G,strictBounds:!0}}),onLoad:A,children:[(0,t.jsx)(o.XL,{children:function(n){return(0,t.jsx)("div",{children:j.map((function(e,s){return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(o.Jx,{position:e.position,title:e.description,clusterer:n,icon:{url:q[e.type]},onClick:function(){R(e.position),V(e)}}),W===e&&(0,t.jsx)(g,{marker:e,onCloseClick:function(){return V(null)},onDescriptionChange:function(n){e.description=n},disableDescription:!0})]},s)}))})}}),y&&(0,t.jsx)(o.tH,{directions:y,options:{suppressMarkers:!0,polylineOptions:{zIndex:50,strokeColor:"#FF7676",strokeWeight:5}}}),p&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Jx,{position:p,icon:"https://cdn1.iconfinder.com/data/icons/joyful-christmas/56/christmas_house-32.png"})}),B.map((function(n,e){return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(o.Jx,{position:n.position,title:n.address,icon:"https://cdn1.iconfinder.com/data/icons/joyful-christmas/56/christmas_house-32.png",onClick:function(){H(n),R(n.position)}}),Y&&Y.position===n.position&&(0,t.jsx)(g,{marker:n,onCloseClick:function(){return H(null)},onDescriptionChange:function(e){n.description=e}})]},"office-marker-".concat(e))}))]},"dee71aef6bd0faf4"):(0,t.jsxs)(o.b6,{zoom:13,center:T,mapContainerClassName:"map-container",options:function(n){return{mapId:"21b1f98b0685a8c2",disableDefaultUI:!0,clickableIcons:!1,restriction:{latLngBounds:n,strictBounds:!0}}}({north:45.7204559777248,south:45.46085230095994,west:5.741038693653954,east:6.073561468829906}),onLoad:Z,children:[F&&(0,t.jsx)(o.tH,{directions:F,options:{polylineOptions:{zIndex:50,strokeColor:"#396d7c",strokeWeight:5}}}),L&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Jx,{position:L,icon:"https://cdn1.iconfinder.com/data/icons/joyful-christmas/56/christmas_house-32.png"})}),v.map((function(n,e){return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(o.Jx,{position:n.position,title:n.address,icon:"https://cdn1.iconfinder.com/data/icons/joyful-christmas/56/christmas_house-32.png",onClick:function(){var e;H(n),e=n.position,L&&(new google.maps.DirectionsService).route({origin:e,destination:L,travelMode:google.maps.TravelMode.DRIVING},(function(n,e){"OK"===e&&n&&I(n)}))}}),Y&&Y.position===n.position&&(0,t.jsx)(g,{marker:n,onCloseClick:function(){return H(null)},onDescriptionChange:function(e){n.description=e}})]},"office-marker-".concat(e))}))]},"21b1f98b0685a8c2"),(0,t.jsx)(f,{}),(0,t.jsx)("div",{className:"candy-cane"}),(0,t.jsx)("div",{className:"header-snow-roof1"}),(0,t.jsx)("div",{className:"header-snow-roof2"}),(0,t.jsx)("div",{className:"header-snow-roof3"}),(0,t.jsx)("div",{className:"header-snow-roof4"}),(0,t.jsx)("div",{className:"candy-cane"}),(0,t.jsx)("div",{className:"menu-button",style:{bottom:"20px",right:"10px"},children:(0,t.jsxs)("div",{className:"wrapper",children:[(0,t.jsx)("input",{type:"checkbox"}),(0,t.jsx)("div",{className:"fab"}),(0,t.jsxs)("div",{className:"fac",children:[(0,t.jsx)(r.rU,{to:"/login",children:(0,t.jsx)("button",{className:"login-button"})}),(0,t.jsx)(r.rU,{to:"/admin",children:(0,t.jsx)("button",{children:"Admin"})})]})]})}),(0,t.jsxs)("div",{className:"map-buttons",children:[(0,t.jsx)("button",{className:"map1-button",onClick:function(){w(!0)},title:"Public Map"}),(0,t.jsx)("button",{className:"map2-button ".concat(e?"":"isNotLogged"),onClick:function(){e&&w(!1)},title:e?"Private Map":"Private Map\nFeature Locked! You must be logged in"})]}),(0,t.jsx)("button",{className:"recenter-button",onClick:function(){var n=C?S.current:M.current,e=C?p:L;n&&e&&n.panTo(e)}}),(0,t.jsx)(m,{markerTypes:["restaurant","shopping","cinema","school","park","gym","transport","bar","theater","swimming pool","ice cream shop","church","clothing store","bakery","hotel","museum","night club","tourist attraction"],displayTypes:["\ud83c\udf57","\ud83c\udf81","\ud83c\udfa5","\ud83d\udc68\u200d\ud83c\udfeb","\ud83c\udf32","\ud83d\udcaa","\ud83d\ude8a","\ud83c\udf7a","\ud83c\udfad","\ud83c\udfca","\ud83c\udf66","\u26ea","\ud83d\udc5c","\ud83e\udd50","\ud83d\udecf\ufe0f","\ud83c\udfa8","\ud83c\udf78","\ud83d\uddff"],onClick:function(n){return function(n){for(var e=(0,i.Z)(B).concat((0,i.Z)(j)),s=0;s<e.length;s++){var t=e[s];console.log(t.type,n),t.type!==n&&t.position.lat-45<1&&(t.position={lat:t.position.lat+10,lng:t.position.lng}),t.type===n&&t.position.lat>46&&(t.position={lat:t.position.lat-10,lng:t.position.lng}),console.log(t.position.lat),V(t)}}(n)}})]})]})},y=["places"];function k(){return(0,o.Db)({googleMapsApiKey:"AIzaSyDED1BRmo3JR9x4RUwvxlsZXtzN8ki39RQ",libraries:y}).isLoaded?(0,t.jsx)(b,{}):(0,t.jsx)("div",{children:"Loading..."})}}},function(n){n.O(0,[255,49,774,888,179],(function(){return e=8312,n(n.s=e);var e}));var e=n.O();_N_E=e}]);